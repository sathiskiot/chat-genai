<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anomaly Detection</title>
  <link rel="stylesheet" href="nav.css" />
  <style>
    :root {
      --bg: #0c0f14;
      --panel: #11161e;
      --panel-2: #0e131a;
      --text: #e6f0ff;
      --muted: #9bb3d1;
      --accent: #00d1ff;
      --danger: #ff5468;
      --warn: #ffd166;
      --shadow: 0 10px 30px rgba(0, 208, 255, 0.12);
      --radius: 14px;
    }

    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial;
      background: var(--bg);
      color: var(--text);
    }

    .container {
      max-width: 1200px;
      margin: 24px auto;
      padding: 0 18px;
    }

    .card {
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      margin-bottom: 20px;
    }

    .card h2 {
      font-size: 18px;
      font-weight: 700;
      color: #d8e8ff;
      margin-bottom: 12px;
    }

    .subtle {
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead th {
      text-align: left;
      font-size: 12px;
      color: #a9c3e6;
      padding: 10px 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    tbody td {
      padding: 12px 8px;
      border-bottom: 1px dashed rgba(255, 255, 255, 0.06);
      color: #d9e6f7;
    }

    .status {
      font-weight: 700;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 12px;
    }

    .status.ok {
      color: #bfffe5;
      background: rgba(91, 255, 183, 0.12);
    }

    .status.warn {
      color: #ffe9a3;
      background: rgba(255, 209, 102, 0.12);
    }

    .status.bad {
      color: #ffd2d8;
      background: rgba(255, 84, 104, 0.12);
    }

    .heat-grid {
      display: grid;
      grid-template-columns: 60px repeat(4, 1fr);
      grid-auto-rows: 36px;
      gap: 6px;
      margin-top: 6px;
    }

    .heat-label {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #a9c3e6;
    }

    .heat-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e6f0ff;
      font-weight: 700;
      font-size: 12px;
      border-radius: 6px;
      border: 1px solid rgba(255, 255, 255, 0.12);
    }

    .rca .details {
      color: #a9c3e6;
      font-size: 13px;
    }

    .site-header {
      background: linear-gradient(180deg, rgba(10, 14, 20, 0.95), rgba(10, 14, 20, 0.85));
      border-bottom: 1px solid rgba(0, 209, 255, 0.12);
      backdrop-filter: blur(8px);
      padding: 14px 22px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .site-header .brand {
      font-weight: 700;
      letter-spacing: 0.3px;
      color: var(--text);
      text-decoration: none;
    }

    .site-header .nav-menu {
      display: flex;
      gap: 14px;
    }

    .site-header .nav-menu a {
      color: var(--muted);
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 10px;
      transition: color 0.2s ease, background 0.2s ease;
    }

    .site-header .nav-menu a.active,
    .site-header .nav-menu a:hover {
      color: var(--text);
      background: rgba(0, 209, 255, 0.12);
    }
  </style>
</head>
<body>
  <header class="site-header">
    <a class="brand" href="index.html">SRE AI LensView</a>
    <nav class="nav-menu">
      <a href="infra-dashboard.html">Dashboard</a>
      <a href="logs-analzer.html">Logs Analyzer</a>
      <a href="anomaly.html" class="active">Anomaly Detection</a>
      <a href="forecasting.html">Forecasting</a>
      <a href="priorities-dashboard.html">Remediate Issue</a>
    </nav>
  </header>

  <main class="container">
    <!-- Highlighted Anomalies -->
    <section class="card">
      <h2>Highlighted Anomalies</h2>
      <p class="subtle">Latest records with severity and status</p>
      <table>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Metric Name</th>
            <th>Value</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="anomalyBody">
          <!-- Dynamic rows will be added here -->
        </tbody>
      </table>
    </section>

    <!-- Correlation Analysis -->
    <section class="card">
      <h2>Correlation Analysis</h2>
      <p class="subtle">Visualize relationships between metrics</p>
      <div class="heat-grid" id="heatGrid">
        <div class="heat-label"></div>
        <div class="heat-label">CPU</div>
        <div class="heat-label">Memory</div>
        <div class="heat-label">Disk</div>
        <div class="heat-label">Network</div>
        <div class="heat-label">CPU</div>
        <div class="heat-cell" data-x="0" data-y="0">1.00</div>
        <div class="heat-cell" data-x="1" data-y="0">0.82</div>
        <div class="heat-cell" data-x="2" data-y="0">0.30</div>
        <div class="heat-cell" data-x="3" data-y="0">0.40</div>
        <div class="heat-label">Memory</div>
        <div class="heat-cell" data-x="0" data-y="1">0.82</div>
        <div class="heat-cell" data-x="1" data-y="1">1.00</div>
        <div class="heat-cell" data-x="2" data-y="1">0.55</div>
        <div class="heat-cell" data-x="3" data-y="1">0.25</div>
      </div>
    </section>

    <!-- Root Cause Analysis -->
    <section class="card">
      <h2>Root Cause Analysis</h2>
      <div class="rca">
        <p class="details" id="rcaDetails">
          <strong>Focus:</strong> Monitoring for anomalies...
        </p>
      </div>
    </section>

    <!-- Disk Space Analysis -->
    <section class="card">
      <h2>Disk Space Analysis</h2>
      <p class="subtle">Top 5 files consuming the most disk space (above 500 MB).</p>
      <table>
        <thead>
          <tr>
            <th>File Name</th>
            <th>Size</th>
            <th>Path</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>database_backup.sql</td>
            <td>2.1 GB</td>
            <td>/var/backups/database_backup.sql</td>
          </tr>
          <tr>
            <td>application.log</td>
            <td>1.8 GB</td>
            <td>/var/logs/application.log</td>
          </tr>
          <tr>
            <td>core_dump_12345</td>
            <td>1.2 GB</td>
            <td>/var/crash/core_dump_12345</td>
          </tr>
          <tr>
            <td>video_tutorial.mp4</td>
            <td>900 MB</td>
            <td>/home/user/videos/video_tutorial.mp4</td>
          </tr>
          <tr>
            <td>debug_trace.log</td>
            <td>750 MB</td>
            <td>/var/logs/debug_trace.log</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <script>
    // Utility function to generate a timestamp
    function getTimestamp() {
      const now = new Date();
      return now.toLocaleTimeString();
    }

    // Utility function to generate random data
    function getRandomValue(min, max) {
      return (Math.random() * (max - min) + min).toFixed(1);
    }

    // Update anomalies table dynamically
    const anomalyBody = document.getElementById('anomalyBody');
    const anomalies = [
      { metric: 'CPU Utilization', value: 91.2, status: 'Anomaly' },
      { metric: 'Memory Utilization', value: 54.2, status: 'Warning' },
      { metric: 'Disk I/O', value: 42, status: 'Normal' }
    ];

    function updateAnomalies() {
      const newAnomaly = {
        time: getTimestamp(),
        metric: anomalies[Math.floor(Math.random() * anomalies.length)].metric,
        value: getRandomValue(10, 100),
        status: Math.random() > 0.7 ? 'Anomaly' : 'Warning'
      };

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${newAnomaly.time}</td>
        <td>${newAnomaly.metric}</td>
        <td>${newAnomaly.value}%</td>
        <td><span class="status ${newAnomaly.status === 'Anomaly' ? 'bad' : 'warn'}">${newAnomaly.status}</span></td>
      `;
      anomalyBody.prepend(row);

      // Keep only the latest 5 rows
      while (anomalyBody.children.length > 5) {
        anomalyBody.removeChild(anomalyBody.lastChild);
      }
    }

    // Update root cause analysis dynamically
    const rcaDetails = document.getElementById('rcaDetails');
    function updateRootCause() {
      const focusMetric = anomalies[Math.floor(Math.random() * anomalies.length)].metric;
      rcaDetails.innerHTML = `
        <strong>Focus:</strong> ${focusMetric} is showing unusual behavior. Investigate related processes and resource usage.
      `;
    }

    // Simulate real-time updates every 3 seconds
    setInterval(() => {
      updateAnomalies();
      updateRootCause();
    }, 3000);
  </script>
</body>
</html>